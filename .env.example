# emp-redis JavaScript Environment Configuration
# Copy this file to .env and configure for your environment

# ==========================================
# REDIS CONFIGURATION
# ==========================================
# Local development
REDIS_URL=redis://localhost:6379/0
# Production external Redis (Railway) - uncomment for production
# REDIS_URL=redis://default:hYMwSwJMmiJyZPOvEeUliKPdlPTOlgaZ@caboose.proxy.rlwy.net:58551

# ==========================================
# HUB CONFIGURATION
# ==========================================
HUB_PORT=3001
HUB_HOST=0.0.0.0
WS_PORT=3002
WS_HOST=0.0.0.0

# WebSocket Configuration
MAX_WS_MESSAGE_SIZE_MB=100
HEARTBEAT_INTERVAL_MS=30000
CONNECTION_TIMEOUT_MS=60000

# ==========================================
# WORKER CONFIGURATION
# ==========================================
WORKER_ID=worker-js-1
WORKER_CONNECTORS=simulation,comfyui,a1111

# Hub Connection
# Local development
HUB_REDIS_URL=redis://localhost:6379/0
# Production external Redis (Railway) - uncomment for production
# HUB_REDIS_URL=redis://default:hYMwSwJMmiJyZPOvEeUliKPdlPTOlgaZ@caboose.proxy.rlwy.net:58551
HUB_WS_URL=ws://localhost:3002
WORKER_WEBSOCKET_AUTH_TOKEN=

# Worker Behavior
WORKER_POLL_INTERVAL_MS=5000
WORKER_MAX_CONCURRENT_JOBS=1
WORKER_HEARTBEAT_INTERVAL=30

# ==========================================
# HARDWARE CONFIGURATION
# ==========================================
GPU_COUNT=1
GPU_MEMORY_GB=16
GPU_MODEL=RTX 4090

# ==========================================
# COMFYUI CONNECTOR CONFIGURATION
# ==========================================
WORKER_COMFYUI_HOST=localhost
WORKER_COMFYUI_PORT=8188
WORKER_COMFYUI_USERNAME=
WORKER_COMFYUI_PASSWORD=
WORKER_COMFYUI_TIMEOUT_SECONDS=300
WORKER_COMFYUI_MAX_CONCURRENT_JOBS=1
WORKER_COMFYUI_WORKFLOW_TIMEOUT_SECONDS=600
WORKER_COMFYUI_IMAGE_FORMAT=png
WORKER_COMFYUI_IMAGE_QUALITY=95
WORKER_COMFYUI_SAVE_WORKFLOW=true

# ==========================================
# A1111 CONNECTOR CONFIGURATION
# ==========================================
WORKER_A1111_HOST=localhost
WORKER_A1111_PORT=7860
WORKER_A1111_USERNAME=
WORKER_A1111_PASSWORD=
WORKER_A1111_TIMEOUT_SECONDS=300
WORKER_A1111_MAX_CONCURRENT_JOBS=1
WORKER_A1111_ENABLE_API=true
WORKER_A1111_SAVE_IMAGES=true
WORKER_A1111_SAVE_GRID=true
WORKER_A1111_IMAGE_FORMAT=png
WORKER_A1111_JPEG_QUALITY=95
WORKER_A1111_PNG_COMPRESSION=6

# ==========================================
# SIMULATION CONNECTOR CONFIGURATION
# ==========================================
WORKER_SIMULATION_PROCESSING_TIME=5
WORKER_SIMULATION_STEPS=10
WORKER_SIMULATION_FAILURE_RATE=0.1
WORKER_SIMULATION_PROGRESS_INTERVAL_MS=200

# ==========================================
# REST CONNECTORS CONFIGURATION
# ==========================================
WORKER_REST_SYNC_BASE_URL=http://localhost:8080
WORKER_REST_SYNC_TIMEOUT_SECONDS=60
WORKER_REST_SYNC_RETRY_ATTEMPTS=3
WORKER_REST_SYNC_RETRY_DELAY_SECONDS=2
WORKER_REST_SYNC_MAX_CONCURRENT_JOBS=5
WORKER_REST_SYNC_METHOD=POST
WORKER_REST_SYNC_RESPONSE_FORMAT=json

WORKER_REST_ASYNC_BASE_URL=http://localhost:8080
WORKER_REST_ASYNC_TIMEOUT_SECONDS=300
WORKER_REST_ASYNC_RETRY_ATTEMPTS=3
WORKER_REST_ASYNC_RETRY_DELAY_SECONDS=2
WORKER_REST_ASYNC_MAX_CONCURRENT_JOBS=10
WORKER_REST_ASYNC_METHOD=POST
WORKER_REST_ASYNC_RESPONSE_FORMAT=json
WORKER_REST_ASYNC_POLLING_INTERVAL_MS=2000
WORKER_REST_ASYNC_COMPLETION_ENDPOINT=/status
WORKER_REST_ASYNC_STATUS_FIELD=status
WORKER_REST_ASYNC_RESULT_FIELD=result

# ==========================================
# WEBSOCKET CONNECTOR CONFIGURATION
# ==========================================
WORKER_WEBSOCKET_URL=ws://localhost:8080/ws
WORKER_WEBSOCKET_PROTOCOL=
WORKER_WEBSOCKET_TIMEOUT_SECONDS=60
WORKER_WEBSOCKET_RETRY_ATTEMPTS=3
WORKER_WEBSOCKET_RETRY_DELAY_SECONDS=2
WORKER_WEBSOCKET_MAX_CONCURRENT_JOBS=5
WORKER_WEBSOCKET_HEARTBEAT_INTERVAL_MS=30000
WORKER_WEBSOCKET_RECONNECT_DELAY_MS=5000
WORKER_WEBSOCKET_MAX_RECONNECT_ATTEMPTS=5

# ==========================================
# CUSTOMER ACCESS CONFIGURATION
# ==========================================
CUSTOMER_ISOLATION=loose
ALLOWED_CUSTOMERS=
DENIED_CUSTOMERS=
MAX_CONCURRENT_CUSTOMERS=10

# ==========================================
# PERFORMANCE CONFIGURATION
# ==========================================
QUALITY_LEVELS=fast,balanced,quality
MAX_PROCESSING_TIME_MINUTES=60

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
LOG_LEVEL=info
LOG_FORMAT=json
NODE_ENV=development