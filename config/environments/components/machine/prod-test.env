# Production-Test Machine Environment - Local machine with production Redis and GitHub worker
# This mimics production deployment but runs locally for testing

# === Core Configuration ===
NODE_ENV=production
EXPOSED_PORTS=2224:22,8082:80,3190:8188,3191:8189,9092:9090,8299:8299

TEST_MODE=true
NUM_GPUS=1
GPU_MEMORY_GB=16
GPU_MODEL="RTX 4090"
SKIP_MODEL_DOWNLOAD=true

# === Machine Identity ===
CONTAINER_NAME=basic-machine-prod-test
MACHINE_ID=basic-machine-prod-test

# === Worker Configuration (Production-like) ===
WORKER_CONNECTORS=simulation,comfyui
WORKER_ID_PREFIX=basic-machine-prod-test

# Worker will be downloaded from GitHub releases (not mounted locally)
# No WORKER_LOCAL_PATH = triggers download from GitHub releases

# === Service Configuration ===
ENABLE_NGINX=false
ENABLE_COMFYUI=false
ENABLE_A1111=false
ENABLE_REDIS_WORKERS=true
ENABLE_OLLAMA=false
ENABLE_SIMULATION=true

# Logging
LOG_LEVEL=info

# ComfyUI Configuration (cloned at build time in Dockerfile)
COMFYUI_CPU_ONLY=false
COMFYUI_REPO_URL=https://github.com/stakeordie/ComfyUI.git
COMFYUI_BRANCH=forward

# Model and Debug Configuration
STATIC_MODELS=
EMPROPS_DEBUG_LOGGING=true

# === Port Configuration ===
SSH_PORT=22
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
COMFYUI_PORT_START=8188
COMFYUI_PORT_END=8190
A1111_PORT_START=7860
A1111_PORT_END=7862
OLLAMA_PORT=11434
HEALTH_PORT=9090
REDIS_PORT=6379

AWS_DEFAULT_REGION=us-east-1
CLOUD_MODELS_CONTAINER=emprops-models
CLOUD_STORAGE_CONTAINER=emprops-share
CLOUD_STORAGE_TEST_CONTAINER=emprops-share-test
CLOUD_PROVIDER=azure
OLLAMA_HOST=127.0.0.1
OLLAMA_PORT=11434
OLLAMA_DEFAULT_MODEL=llama3

# === Simulation Service Configuration ===
SIMULATION_PORT=8299
SIMULATION_HOST=localhost
SIMULATION_PROCESSING_TIME=5
SIMULATION_STEPS=10
SIMULATION_FAILURE_RATE=0.1
SIMULATION_PROGRESS_INTERVAL_MS=500

# === Worker Health Check Configuration ===
WORKER_HEALTH_CHECK_INTERVAL_MS=30000
WORKER_WEBSOCKET_INACTIVITY_TIMEOUT_MS=30000
WORKER_SIMULATION_HEALTH_CHECK_FAILURE_RATE=0.2

# === Storage Configuration ===
STORAGE_TEST_MODE=true
SKIP_STORAGE_SYNC=true