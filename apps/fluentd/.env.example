# Fluentd Log Aggregation Service Configuration
# Copy this to .env and configure for your environment

# =============================================================================
# CORE SERVICE SETTINGS
# =============================================================================

NODE_ENV=development
SERVICE_NAME=fluentd-aggregator
LOG_LEVEL=info

# Fluentd instance hostname (for distributed deployments)
HOSTNAME=fluentd-central

# =============================================================================
# DASH0 INTEGRATION (Required)
# =============================================================================

# Your Dash0 API key from the dashboard
DASH0_API_KEY=auth_w8VowQspnZ8whZHWp1pe6azIIehBAAvL

# Dataset name (usually environment name)
DASH0_DATASET=development

# Dash0 endpoint (usually don't change this)
DASH0_LOGS_ENDPOINT=https://ingress.us-west-2.aws.dash0.com/logs/json

# =============================================================================
# REDIS FAILOVER (Optional but Recommended)
# =============================================================================

# Redis connection for failover queue
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Redis database numbers for different purposes
REDIS_DB_FAILOVER=2
REDIS_DB_ALERTS=3

# =============================================================================
# SECURITY & TLS
# =============================================================================

# Shared key for Fluent Bit authentication
FLUENTD_SHARED_KEY=emp-log-aggregation-key

# TLS certificate paths (for production)
TLS_CERT_PATH=/fluentd/certs/server.crt
TLS_KEY_PATH=/fluentd/certs/server.key
TLS_CA_PATH=/fluentd/certs/ca.crt

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Buffer configuration
BUFFER_CHUNK_SIZE=8MB
BUFFER_QUEUE_LENGTH=64
BUFFER_FLUSH_INTERVAL=5s
BUFFER_RETRY_MAX=10

# HTTP timeouts
HTTP_TIMEOUT=30
HTTP_OPEN_TIMEOUT=10

# Batch processing
BATCH_SIZE=100
MAX_RETRIES=3

# =============================================================================
# PORT CONFIGURATION
# =============================================================================

# Fluentd ports
FLUENTD_FORWARD_PORT=24224
FLUENTD_FORWARD_TLS_PORT=24225
FLUENTD_HTTP_PORT=8888
FLUENTD_MONITOR_PORT=24220
FLUENTD_PROMETHEUS_PORT=9880

# Companion service port
COMPANION_PORT=3000

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# CORS origins for companion service (comma-separated)
CORS_ORIGINS=http://localhost:3333,http://localhost:3000

# Enable test log generation
ENABLE_TEST_LOGS=false
TEST_LOG_INTERVAL=5

# Debug settings
DEBUG_MODE=false
VERBOSE_LOGGING=false